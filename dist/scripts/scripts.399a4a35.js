"use strict";angular.module("compBioProjectApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]).run(function(){sigma.classes.graph.addMethod("neighbors",function(a){var b,c={},d=this.allNeighborsIndex[a]||{};for(b in d)c[b]=this.nodesIndex[b];return c})}),angular.module("compBioProjectApp").constant("PanelConstant",{serverUrl:"http://0.0.0.0:5010",dbUrl:"http://0.0.0.0:3000"}),angular.module("compBioProjectApp").controller("MainCtrl",["$scope","$http","PanelConstant",function(a,b,c){a.clickLevel=1,a.relativePath="/L1Cluster",a.prevL2Node=null,a.decrementClickLevel=function(){3===a.clickLevel?(a.relativePath="/L2Cluster/"+a.prevL2Node,a.clickLevel--,a.executeSigma()):2===a.clickLevel&&(a.relativePath="/L1Cluster",a.clickLevel--,a.executeSigma())},a.executeSigma=function(){document.getElementById("sigma-container").innerHTML="",sigma.parsers.json(c.dbUrl+a.relativePath,{container:"sigma-container"},function(b){b.graph.nodes().forEach(function(a){a.originalColor=a.color}),b.graph.edges().forEach(function(a){a.originalColor=a.color}),1===a.clickLevel?b.bind("clickNode",function(b){var c=b.data.node.id;a.$apply(function(){a.prevL2Node=c,a.relativePath="/L2Cluster/"+c,a.clickLevel++}),a.executeSigma()}):2===a.clickLevel?b.bind("clickNode",function(b){var c=b.data.node.id;a.$apply(function(){a.relativePath="/L3Cluster/"+c,a.clickLevel++}),a.executeSigma()}):3===a.clickLevel&&b.bind("clickNode",function(a){var c=a.data.node.id,d=b.graph.neighbors(c);d[c]=a.data.node,b.graph.nodes().forEach(function(a){d[a.id]?a.color=a.originalColor:a.color="#eee"}),b.graph.edges().forEach(function(a){d[a.source]&&d[a.target]?a.color=a.originalColor:a.color="#eee"}),b.refresh()}),b.bind("clickStage",function(a){b.graph.nodes().forEach(function(a){a.color=a.originalColor}),b.graph.edges().forEach(function(a){a.color=a.originalColor}),b.refresh()})})},a.executeSigma()}]),function(a){if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers"),sigma.utils.pkg("sigma.utils"),sigma.utils.xhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var a,b;if(window.ActiveXObject){a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(b in a)try{return new ActiveXObject(a[b])}catch(c){}}return null},sigma.parsers.json=function(a,b,c){var d,e=sigma.utils.xhr();if(!e)throw"XMLHttpRequest not supported, cannot load the file.";e.open("GET",a,!0),e.onreadystatechange=function(){4===e.readyState&&(d=JSON.parse(e.responseText),b instanceof sigma?(b.graph.clear(),b.graph.read(d)):"object"==typeof b?(b.graph=d,b=new sigma(b)):"function"==typeof b&&(c=b,b=null),c&&c(b||d))},e.send()}}.call(this),angular.module("compBioProjectApp").run(["$templateCache",function(a){a.put("views/main.html",'<button class="up-button" ng-click="decrementClickLevel()" ng-show="clickLevel > 1">Up</button> <div id="sigma-container" class="graph-container"></div>')}]);